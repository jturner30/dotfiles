#!/bin/zsh

# Ask for admin password on login
sudo -v

# Keep alive until .osx finishes
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# Show battery time
defaults write com.apple.menuextra.battery ShowTime -string "YES"

# Hide time machine and volume icons
defaults write com.apple.systemuiserver menuExtras -array "/System/Library/CoreServices/Menu Extras/Bluetooth.menu" "/System/Library/CoreServices/Menu Extras/AirPort.menu" "/System/Library/CoreServices/Menu Extras/Battery.menu" "/System/Library/CoreServices/Menu Extras/Clock.menu"

# Always show scrollbar
defaults write NSGlobalDomain AppleShowScrollBars -string "Always"

# Increase window resize speed for Cocoa Applications
defaults write NSGlobalDomain NSWindowResizeTime -float 0.001

# Expand save panel by defaults
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true

# Disable the "Are you sure you want to open this application?"
defaults write com.apple.LaunchServices LSQuarantine -bool false

# Disable automatic termination of inactive apps
defaults write NSGlobalDomain NSDisableAutomaticTermination -bool false

# Reveal IP address, hostname, OS version when clicking the Clock
sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName

# Disable press and hold for keys in favor of key repeat
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

# Set fast keyboard repeat rate
defaults write NSGlobalDomain KeyRepeat -int 0

# Disable autocorrect
defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool false

################################
# FINDER
################################

# Allow quitting via cmd + Q
defaults write com.apple.finder QuitMenuItem -bool true

# Disable finder animations
defaults write com.apple.finder DisableAllAnimations -bool true

# Show all file name extentions
defaults write NSGlobalDomain AppleShowAllExtentions -bool true

# Show status bar
defaults write com.apple.finder ShowStatusBar -bool true

# Allow text selection in Quick Look
defaults write com.apple.finder QLEnableTextSelection -bool true

# Display full file path in window title
defaults write com.apple.finder _FXShowPosixPathInTitle -bool true

# Use list view in finder by default
defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"

# Show library folder
chflags nohidden ~/Library

################################
# KILL AFFECTED APPS
################################
for app in "SystemUIServer" "Finder"; do killall "$app" > /dev/null 2>&1
done


